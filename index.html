<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç-—Ä—É–ª–µ—Ç–∫–∞</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>–ß–∞—Ç-—Ä—É–ª–µ—Ç–∫–∞</h1>
    <button id="findBtn">üîç –ù–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞</button>
    <p id="status"></p>

    <script>
        const socket = new WebSocket('ws://localhost:3000');
        const findBtn = document.getElementById("findBtn");
        const statusText = document.getElementById("status");

        findBtn.addEventListener("click", () => {
            let timeLeft = 30;
            findBtn.disabled = true;
            findBtn.textContent = `‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ: ${timeLeft}s`;

            const countdown = setInterval(() => {
                timeLeft--;
                findBtn.textContent = `‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ: ${timeLeft}s`;

                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    findBtn.textContent = "‚ùå –°–æ–±–µ—Å–µ–¥–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω";
                    findBtn.disabled = false;
                }
            }, 1000);

            socket.send(JSON.stringify({ action: "find" }));

            socket.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.message === "‚úÖ –°–æ–±–µ—Å–µ–¥–Ω–∏–∫ –Ω–∞–π–¥–µ–Ω") {
                    clearInterval(countdown);
                    findBtn.textContent = "‚úÖ –°–æ–±–µ—Å–µ–¥–Ω–∏–∫ –Ω–∞–π–¥–µ–Ω";
                    statusText.textContent = "–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å —á–∞—Ç!";
                    findBtn.disabled = false;
                }
                if (data.message === "‚ùå –°–æ–±–µ—Å–µ–¥–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.") {
                    clearInterval(countdown);
                    findBtn.textContent = "‚ùå –°–æ–±–µ—Å–µ–¥–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω";
                    findBtn.disabled = false;
                }
            };
        });
    </script>

</body>
</html>
